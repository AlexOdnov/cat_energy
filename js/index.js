!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=(t,e="active")=>{const i=window.innerWidth-document.body.offsetWidth+"px",n=document.querySelectorAll("[data-fixed]");t.classList.contains(e)?(document.body.style.overflowY="hidden",document.body.style.paddingRight=i,n.forEach(t=>{"outer"===t.dataset.fixed?t.style.marginRight=i:"inner"===t.dataset.fixed&&(t.style.paddingRight=i)})):(document.body.style.overflowY="",document.body.style.paddingRight="",n.forEach(t=>{"outer"===t.dataset.fixed?t.style.marginRight="":"inner"===t.dataset.fixed&&(t.style.paddingRight="")}))};const s=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];var r=(t,e)=>{const i=[...e.querySelectorAll(s)];if(!i.length)return e.focus(),void t.preventDefault();if(e.contains(document.activeElement)){const e=i.indexOf(document.activeElement);t.shiftKey&&0===e&&(i[i.length-1].focus(),t.preventDefault()),t.shiftKey||e!==i.length-1||(i[0].focus(),t.preventDefault())}else i[0].focus(),t.preventDefault()};class a{constructor(t){this.slider=document.querySelector("#"+t),this.beforeBtn=this.slider.querySelector(".slider__btn-before"),this.afterBtn=this.slider.querySelector(".slider__btn-after"),this.control=this.slider.querySelector(".slider__range"),this.minValue=+this.control.min,this.maxValue=+this.control.max,this.beforeImg=this.slider.querySelector(".slider__img-before"),this.afterImg=this.slider.querySelector(".slider__img-after"),this.init()}init(){this.control.addEventListener("input",function(t){t.preventDefault(),this.setVisibility()}.bind(this)),this.beforeBtn.addEventListener("click",function(t){t.preventDefault(),this.toggleVisibility(1e3)}.bind(this)),this.afterBtn.addEventListener("click",function(t){t.preventDefault(),this.toggleVisibility(0)}.bind(this)),this.setVisibility()}changeVisibility(t){const e=t/10;this.beforeImg.style.clipPath=`inset(0% ${100-e}% 0% 0%)`,this.afterImg.style.clipPath=`inset(0% 0% 0% ${e}%)`}toggleVisibility(t){this.beforeImg.style.transition="all 0.5s ease 0s",this.afterImg.style.transition="all 0.5s ease 0s",this.changeVisibility(t),setTimeout(()=>{this.beforeImg.style.transition="",this.afterImg.style.transition=""},500),this.control.value=t}setVisibility(){const t=+this.control.value;t!==this.minValue?t!==this.maxValue?this.changeVisibility(t):this.toggleVisibility(1e3):this.toggleVisibility(0)}}class o{constructor(t={}){this.settings=Object.assign({src:"",cardContainerSelector:""},t),this.cardContainer=document.querySelector(this.settings.cardContainerSelector),this.cardMore=null,this.init()}async init(){await this.renderCard(),this.createCardMore(),this.cardMore.addEventListener("click",this.appendCard.bind(this))}async loadData(){try{const t=await fetch(this.settings.src);return Object.values(await t.json())}catch(t){console.warn(t)}}createCard(t){const{img:e,title:i,weight:n,taste:s,price:r}=t;return`\n    <article class="card-grid__item product-card">\n      <a class="product-card__link" href="#">\n        <img\n          class="product-card__img"\n          src="./img/contentImage/${e}.png"\n          srcset="./img/contentImage/${e}.webp"\n          alt="${i}"\n        />\n      </a>\n      <a class="product-card__link-title" href="#">\n        <h3 class="product-card__title">${i}</h3></a\n      >\n      <table class="product-card__characteristics">\n        <tr class="product-card__row">\n          <td class="product-card__cell">Масса</td>\n          <td class="product-card__cell">${n}</td>\n        </tr>\n        <tr class="product-card__row">\n          <td class="product-card__cell">Вкус</td>\n          <td class="product-card__cell">${s}</td>\n        </tr>\n        <tr class="product-card__row">\n          <td class="product-card__cell">Цена</td>\n          <td class="product-card__cell">${r} Р.</td>\n        </tr>\n      </table>\n      <button class="btn product-card__btn">заказать</button>\n    </article>`}createCardMore(){const t=document.createElement("article");t.className="card-grid__item load-more",t.insertAdjacentHTML("beforeend",'<div class="load-more__wrapper">\n        <h3 class="load-more__title">Показать еще 100500 товаров</h3>\n        <p class="load-more__text">На самом деле вкусов гораздо больше!</p>\n        <button class="btn btn--wide btn--grey load-more__btn">\n          показать все\n        </button>\n      </div>'),this.cardContainer.append(t),this.cardMore=t}async renderCard(){try{const t=(await this.loadData()).map(t=>this.createCard(t)).join("");this.cardContainer.insertAdjacentHTML("beforeend",t)}catch(t){console.warn(t)}}async appendCard(){this.cardMore.remove(),await this.renderCard(),this.cardContainer.append(this.cardMore)}}new class{constructor(t={}){this.settings=Object.assign({menuContainerSelector:".header",menuSelector:".navigation",btnSelector:".mobile-menu-toggler",breakpoint:"768"},t),this.menuContainer=document.querySelector(this.settings.menuContainerSelector),this.menu=document.querySelector(this.settings.menuSelector),this.btn=document.querySelector(this.settings.btnSelector),this.isMenuOpen=!1,this.breakpoint=this.settings.breakpoint,this.init()}init(){this.btn.addEventListener("click",function(t){this.isMenuOpen?this.menuClose(t):this.menuOpen(t)}.bind(this)),window.addEventListener("click",function(t){this.isMenuOpen&&!this.menuContainer.contains(t.target)&&this.menuClose(t)}.bind(this)),window.addEventListener("keydown",function(t){this.isMenuOpen&&"Escape"===t.code?this.menuClose(t):this.isMenuOpen&&"Tab"===t.code&&r(t,this.menuContainer)}.bind(this)),window.addEventListener("resize",function(t){this.isMenuOpen&&window.innerWidth>this.breakpoint&&this.menuClose(t)}.bind(this))}menuOpen(t){t.preventDefault(),this.isMenuOpen=!0,this.menu.style.transition="all 0.3s ease 0s",this.menu.classList.add("active"),this.btn.classList.add("active"),n(this.menu),setTimeout(()=>{this.menu.style.transition=""},350)}menuClose(t){t.preventDefault(),this.isMenuOpen=!1,this.menu.style.transition="all 0.3s ease 0s",this.menu.classList.remove("active"),this.btn.classList.remove("active"),n(this.menu),setTimeout(()=>{this.menu.style.transition=""},350),this.btn.focus()}};if(document.querySelector("#rangeSlider")){new a("rangeSlider")}if(document.querySelector(".card-grid__container")){new o({cardContainerSelector:".card-grid__container",src:"./data/cards.json"})}new class extends class{constructor(t={}){this.settings=Object.assign({mapContainerID:"map",src:"https://api-maps.yandex.ru/2.1/?lang=ru_RU",zoom:15,scrollZoom:!0,pin:!1,controls:!1},t),this.mapContainer=document.querySelector("#"+this.settings.mapContainerID),this.mapInitializer=this.mapInitializer.bind(this),this.init()}init(){window.addEventListener("scroll",this.mapInitializer),this.mapInitializer()}mapCreate(){if(this.myMap=new ymaps.Map(this.settings.mapContainerID,{center:[this.settings.yCenter,this.settings.xCenter],zoom:this.settings.zoom,controls:[]}),this.settings.pin){const t=new ymaps.Placemark([this.settings.yPin,this.settings.xPin],{},{iconLayout:"default#image",iconImageHref:this.settings.pin.path,iconImageSize:this.settings.pin.size,iconImageOffset:this.settings.pin.offset});this.myMap.geoObjects.add(t)}else{const t=new ymaps.Placemark([this.settings.yPin,this.settings.xPin]);this.myMap.geoObjects.add(t)}this.settings.scrollZoom||(this.myMap.behaviors.disable("scrollZoom"),this.myMap.controls.add("zoomControl")),this.settings.controls&&this.settings.controls.forEach(t=>{this.myMap.controls.add(t)})}mapInitializer(){if(this.mapContainer.getBoundingClientRect().top<=2*document.documentElement.clientHeight){const t=document.createElement("script");t.src=this.settings.src,document.body.append(t),t.onload=()=>{ymaps.ready(this.mapCreate.bind(this))},window.removeEventListener("scroll",this.mapInitializer)}}}{constructor(t){super(t),this.changeCenter=this.changeCenter.bind(this),this.checkCenter()}mapCreate(){super.mapCreate(),this.changeCenter()}checkCenter(){window.addEventListener("resize",this.changeCenter)}changeCenter(){this.myMap&&window.innerWidth>=this.settings.breakpoint?this.myMap.setCenter([this.settings.newYCenter,this.settings.newXCenter]):this.myMap&&window.innerWidth<this.settings.breakpoint&&this.myMap.setCenter([this.settings.yCenter,this.settings.xCenter])}}({yCenter:59.938633647616214,xCenter:30.32304549758399,yPin:59.938633647616214,xPin:30.32304549758399,pin:{path:"img/backgrounds/map-pin.svg",size:[60,71],offset:[-30,-71]},zoom:16,breakpoint:1440,newYCenter:59.938633647616214,newXCenter:30.317})}]);